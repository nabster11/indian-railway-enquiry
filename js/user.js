$(document).ready(function(){function c(g){var h=JSON.parse(g);var e=h.status;if(e==="FLUSHED PNR / PNR NOT YET GENERATED"){$("#pnroutput").html("The PNR you entered has not been generated as of yet OR it has already expired");}else{if(e==="NOT_FOUND"){$("#pnroutput").html("The data you requested was not found");}else{if(e==="ZERO_RESULTS"){$("#pnroutput").html("no result obtained from this query");}else{if(e==="INVALID_REQUEST"){$("#pnroutput").html("Check whether you entered a correct PNR");}else{if(e==="QUERY_LIMIT_FOR_DAY"||e==="OVER_QUERY_LIMIT_FOR_QUERY"){$("#pnroutput").html("the number of requests for a day exceeded permitted limit");}else{if(e==="REQUEST_DENIED"){$("#pnroutput").html("the service denied the use of the api by your application , if this happens frequently , try to drop a mail to purohit.div@gmail.com");}else{if(e==="OK"){var f=('<table data-role="table" data-mode="reflow" class="ui-responsive table-stripe ui-shadow" id="myTable">');$.each(h.result,function(i,d){if(i=="passengers"){$.each(h.result.passengers[0],function(k,j){if(k=="bookingstatus"){k="Booking Status";j=j.toString().substr(0,7);}if(k=="currentstatus"){k="Current Status";}f+=("<tr>");f+=("<th>"+k+"</th>");f+=("<td>"+j+"</td>");f+=("</tr>");});}else{f+=("<tr>");if(i=="cls"){i="Class";}if(i=="name"){i="Train Name";}if(i=="brdg"){i="Boarding";}if(i=="trainno"){i="Train No";}f+=('<th style="color:"red";">'+i+"</th>");f+=("<td>"+d+"</td>");f+=("</tr>");}});f+="</table>";$("#pnroutput").html(f);}else{$("#pnroutput").html("The request could not be processed due to a server error,it may succeed if you try again");}}}}}}}$("#pnr").html("");}function b(e,d){$("#pnroutput").html("The request could not be processed due to a server error,it may succeed if you try again");$("#pnr").html("");}$(document).on("submit","#form1",function(d){a();d.preventDefault();});function a(){$("#pnroutput").html("");var d=$("#pnr").val();if(d.length===10){$.ajax({type:"GET",url:"http://api.erail.in/pnr?key=YOUR_API_KEY&pnr="+d,cache:false,beforeSend:function(){$.mobile.loading("show",{theme:"b",text:"Please wait...",textonly:false,textVisible:true});},success:c,error:b,complete:function(){$.mobile.loading("hide");}});}}});